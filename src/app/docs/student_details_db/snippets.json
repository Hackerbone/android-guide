{
    "snippets": [
      {
        "codeblockTitle": "activity_main.xml - Main Layout",
        "code": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/main\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    tools:context=\".MainActivity\">\n\n    <EditText\n        android:id=\"@+id/name\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"16dp\"\n        android:hint=\"Name\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" />\n\n    <EditText\n        android:id=\"@+id/regno\"\n        android:hint=\"Reg No\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toBottomOf=\"@id/name\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_margin=\"16dp\" />\n\n    <EditText\n        android:id=\"@+id/m1\"\n        android:hint=\"Marks 1\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toBottomOf=\"@id/regno\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_margin=\"16dp\" />\n\n    <EditText\n        android:id=\"@+id/m2\"\n        android:hint=\"Marks 2\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toBottomOf=\"@id/m1\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_margin=\"16dp\" />\n\n    <EditText\n        android:id=\"@+id/m3\"\n        android:hint=\"Marks 3\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toBottomOf=\"@id/m2\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_margin=\"16dp\" />\n\n    <Button\n        android:id=\"@+id/insertBtn\"\n        android:text=\"Insert Student\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toBottomOf=\"@id/m3\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginTop=\"16dp\" />\n\n    <Button\n        android:id=\"@+id/searchBtn\"\n        android:text=\"Search Students\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:layout_constraintTop_toBottomOf=\"@id/insertBtn\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginTop=\"16dp\" />\n</androidx.constraintlayout.widget.ConstraintLayout>"
      },
      {
        "codeblockTitle": "main_menu.xml - Menu Layout",
        "code": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<menu xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:id=\"@+id/insert\" android:title=\"Insert\"/>\n    <item android:id=\"@+id/view\" android:title=\"View\"/>\n    <item android:id=\"@+id/grade\" android:title=\"Grade\"/>\n</menu>"
      },
      {
        "codeblockTitle": "MainActivity.kt - Main Activity",
        "code": "package com.example.endsem\n\nimport android.content.Intent\nimport android.os.Bundle\nimport android.view.Menu\nimport android.view.MenuItem\nimport android.widget.Button\nimport android.widget.EditText\nimport android.widget.Toast\nimport androidx.appcompat.app.AlertDialog\nimport androidx.appcompat.app.AppCompatActivity\n\nclass MainActivity : AppCompatActivity() {\n\n    lateinit var dbHelper: DBHelper\n    lateinit var name: EditText\n    lateinit var regno: EditText\n    lateinit var m1: EditText\n    lateinit var m2: EditText\n    lateinit var m3: EditText\n    lateinit var searchBtn: Button\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        dbHelper = DBHelper(this)\n\n        name = findViewById(R.id.name)\n        regno = findViewById(R.id.regno)\n        m1 = findViewById(R.id.m1)\n        m2 = findViewById(R.id.m2)\n        m3 = findViewById(R.id.m3)\n        searchBtn = findViewById(R.id.searchBtn)\n\n        searchBtn.setOnClickListener {\n            startActivity(Intent(this, SearchActivity::class.java))\n        }\n\n        val insertBtn = findViewById<Button>(R.id.insertBtn)\n        insertBtn.setOnClickListener {\n            val n = name.text.toString()\n            val r = regno.text.toString()\n            val mark1 = m1.text.toString().toIntOrNull() ?: 0\n            val mark2 = m2.text.toString().toIntOrNull() ?: 0\n            val mark3 = m3.text.toString().toIntOrNull() ?: 0\n\n            dbHelper.insertData(n, r, mark1, mark2, mark3)\n            Toast.makeText(this, \"Inserted via Button\", Toast.LENGTH_SHORT).show()\n        }\n\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu?): Boolean {\n        menuInflater.inflate(R.menu.main_menu, menu)\n        return true\n    }\n\n    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n        when (item.itemId) {\n            R.id.insert -> {\n                val n = name.text.toString()\n                val r = regno.text.toString()\n                val mark1 = m1.text.toString().toIntOrNull() ?: 0\n                val mark2 = m2.text.toString().toIntOrNull() ?: 0\n                val mark3 = m3.text.toString().toIntOrNull() ?: 0\n\n                dbHelper.insertData(n, r, mark1, mark2, mark3)\n                Toast.makeText(this, \"Inserted\", Toast.LENGTH_SHORT).show()\n                return true\n            }\n\n            R.id.view -> {\n                val students = dbHelper.getAllStudents()\n                if (students.isEmpty()) {\n                    Toast.makeText(this, \"No students found\", Toast.LENGTH_SHORT).show()\n                } else {\n                    val builder = StringBuilder()\n                    for (student in students) {\n                        builder.append(\"Name: ${student.name}\\n\")\n                        builder.append(\"Reg No: ${student.regNo}\\n\")\n                        builder.append(\"Mark1: ${student.mark1}, Mark2: ${student.mark2}, Mark3: ${student.mark3}\\n\")\n                        builder.append(\"----------\\n\")\n                    }\n\n                    AlertDialog.Builder(this)\n                        .setTitle(\"Student Records\")\n                        .setMessage(builder.toString())\n                        .setPositiveButton(\"OK\", null)\n                        .show()\n                }\n                true\n            }\n\n            R.id.grade -> {\n                val r = regno.text.toString()\n                val avg = dbHelper.calculateAverage(r)\n                val grade = when {\n                    avg >= 90 -> \"A\"\n                    avg >= 75 -> \"B\"\n                    avg >= 60 -> \"C\"\n                    else -> \"D\"\n                }\n                Toast.makeText(this, \"Grade: $grade\", Toast.LENGTH_SHORT).show()\n                return true\n            }\n        }\n        return super.onOptionsItemSelected(item)\n    }\n}"
      },
      {
        "codeblockTitle": "themes.xml - Theme Resources",
        "code": "<resources xmlns:tools=\"http://schemas.android.com/tools\">\n    <!-- Base application theme. -->\n    <style name=\"Base.Theme.Endsem\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\n        <!-- You can customize colors here -->\n    </style>\n\n    <style name=\"Theme.Endsem\" parent=\"Base.Theme.Endsem\" />\n</resources>"
      },
      {
        "codeblockTitle": "DBHelper.kt - Database Helper",
        "code": "package com.example.endsem\n\nimport android.content.ContentValues\nimport android.content.Context\nimport android.database.sqlite.SQLiteDatabase\nimport android.database.sqlite.SQLiteOpenHelper\n\nclass DBHelper(context: Context) : SQLiteOpenHelper(context, \"student.db\", null, 1) {\n\n    override fun onCreate(db: SQLiteDatabase) {\n        db.execSQL(\"CREATE TABLE student(name TEXT, regno TEXT PRIMARY KEY, m1 INTEGER, m2 INTEGER, m3 INTEGER)\")\n    }\n\n    override fun onUpgrade(db: SQLiteDatabase, oldVersion: Int, newVersion: Int) {\n        db.execSQL(\"DROP TABLE IF EXISTS student\")\n        onCreate(db)\n    }\n\n    fun insertData(name: String, regno: String, m1: Int, m2: Int, m3: Int) {\n        val db = writableDatabase\n        val cv = ContentValues()\n        cv.put(\"name\", name)\n        cv.put(\"regno\", regno)\n        cv.put(\"m1\", m1)\n        cv.put(\"m2\", m2)\n        cv.put(\"m3\", m3)\n        db.insert(\"student\", null, cv)\n    }\n\n    fun viewAll(): String {\n        val db = readableDatabase\n        val cursor = db.rawQuery(\"SELECT * FROM student\", null)\n        val buffer = StringBuffer()\n        while (cursor.moveToNext()) {\n            buffer.append(\"Name: ${cursor.getString(0)}\\n\")\n            buffer.append(\"Reg No: ${cursor.getString(1)}\\n\")\n            buffer.append(\"Marks: ${cursor.getInt(2)}, ${cursor.getInt(3)}, ${cursor.getInt(4)}\\n\\n\")\n        }\n        cursor.close()\n        return buffer.toString()\n    }\n\n    fun getAllStudents(): List<Student> {\n        val list = mutableListOf<Student>()\n        val db = readableDatabase\n        val cursor = db.rawQuery(\"SELECT * FROM student\", null)\n        if (cursor.moveToFirst()) {\n            do {\n                val name = cursor.getString(0)\n                val regNo = cursor.getString(1)\n                val m1 = cursor.getInt(2)\n                val m2 = cursor.getInt(3)\n                val m3 = cursor.getInt(4)\n                list.add(Student(name, regNo, m1, m2, m3))\n            } while (cursor.moveToNext())\n        }\n        cursor.close()\n        return list\n    }\n\n    fun calculateAverage(regno: String): Int {\n        val db = readableDatabase\n        val cursor = db.rawQuery(\"SELECT m1, m2, m3 FROM student WHERE regno=?\", arrayOf(regno))\n        var avg = 0\n        if (cursor.moveToFirst()) {\n            avg = (cursor.getInt(0) + cursor.getInt(1) + cursor.getInt(2)) / 3\n        }\n        cursor.close()\n        return avg\n    }\n\n    fun searchAll(): ArrayList<String> {\n        val db = readableDatabase\n        val cursor = db.rawQuery(\"SELECT * FROM student\", null)\n        val list = ArrayList<String>()\n        while (cursor.moveToNext()) {\n            list.add(\"${cursor.getString(0)} - ${cursor.getString(1)}\")\n        }\n        cursor.close()\n        return list\n    }\n}"
      },
      {
        "codeblockTitle": "Student.kt - Data Model",
        "code": "package com.example.endsem\n\ndata class Student(\n    val name: String,\n    val regNo: String,\n    val mark1: Int,\n    val mark2: Int,\n    val mark3: Int\n)"
      },
      {
        "codeblockTitle": "SearchActivity.kt - Search Activity",
        "code": "package com.example.endsem\n\nimport android.os.Bundle\nimport android.widget.ArrayAdapter\nimport android.widget.ListView\nimport androidx.appcompat.app.AppCompatActivity\n\nclass SearchActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_search)\n\n        val listView: ListView = findViewById(R.id.listView)\n        val dbHelper = DBHelper(this)\n        val studentList = dbHelper.searchAll()\n\n        val adapter = ArrayAdapter(this, android.R.layout.simple_list_item_1, studentList)\n        listView.adapter = adapter\n    }\n}"
      },
      {
        "codeblockTitle": "activity_search.xml - Search Layout",
        "code": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\" android:layout_width=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    android:layout_height=\"match_parent\">\n\n    <ListView\n        android:id=\"@+id/listView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"/>\n</LinearLayout>"
      }
    ]
}

