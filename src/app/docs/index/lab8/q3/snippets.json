{
  "snippets": [
    {
      "codeblockTitle": "MainActivity.java",
      "code": "\npackage com.example.myapplication;\n\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport androidx.activity.EdgeToEdge;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.graphics.Insets;\nimport androidx.core.view.ViewCompat;\nimport androidx.core.view.WindowInsetsCompat;\n\npublic class MainActivity extends AppCompatActivity {\n    // Key for SharedPreferences\n    private static final String PREFS_NAME = \"MyPrefsFile\";\n\n    // Keys for storing specific values\n    private static final String NAME_KEY = \"username\";\n    private static final String EMAIL_KEY = \"email\";\n    private static final String AGE_KEY = \"age\";\n\n    // UI Components\n    private EditText editTextName, editTextEmail, editTextAge;\n    private Button buttonSave;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        EdgeToEdge.enable(this); // Enables edge-to-edge display to allow full-screen view\n        setContentView(R.layout.activity_main);\n\n        // Handle system bars insets to adjust UI for system UI like status bar\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -> {\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\n            return insets;\n        });\n\n        // Initialize UI components\n        initializeViews();\n\n        // Load previously saved preferences when activity is created\n        loadSavedPreferences();\n    }\n\n    private void initializeViews() {\n        // Bind UI components to variables\n        editTextName = findViewById(R.id.editTextName);\n        editTextEmail = findViewById(R.id.editTextEmail);\n        editTextAge = findViewById(R.id.editTextAge);\n        buttonSave = findViewById(R.id.buttonSave);\n\n        // Set up a click listener for the save button\n        buttonSave.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                savePreferences(); // Save the preferences when button is clicked\n            }\n        });\n    }\n\n    // Method to save data into SharedPreferences\n    private void savePreferences() {\n        // Get SharedPreferences in edit mode\n        SharedPreferences preferences = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);\n        SharedPreferences.Editor editor = preferences.edit();\n\n        // Save the values from EditText fields\n        editor.putString(NAME_KEY, editTextName.getText().toString());\n        editor.putString(EMAIL_KEY, editTextEmail.getText().toString());\n\n        // Check if age is provided and valid before saving\n        String ageStr = editTextAge.getText().toString();\n        if (!ageStr.isEmpty()) {\n            try {\n                // Try parsing age to integer\n                int age = Integer.parseInt(ageStr);\n                editor.putInt(AGE_KEY, age); // Save age if valid\n            } catch (NumberFormatException e) {\n                // Display error message if age is not a valid number\n                Toast.makeText(this, \"Invalid age\", Toast.LENGTH_SHORT).show();\n                return; // Return early to prevent saving invalid data\n            }\n        }\n\n        // Commit the changes asynchronously\n        editor.apply(); // Use apply() for asynchronous saving\n\n        // Show a confirmation message\n        Toast.makeText(this, \"Preferences Saved\", Toast.LENGTH_SHORT).show();\n    }\n\n    // Method to load previously saved preferences\n    private void loadSavedPreferences() {\n        // Retrieve SharedPreferences\n        SharedPreferences preferences = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);\n\n        // Restore values from SharedPreferences (if available)\n        String savedName = preferences.getString(NAME_KEY, \"\");\n        String savedEmail = preferences.getString(EMAIL_KEY, \"\");\n        int savedAge = preferences.getInt(AGE_KEY, -1); // Default value for age is -1\n\n        // Set the restored values into EditText fields\n        editTextName.setText(savedName);\n        editTextEmail.setText(savedEmail);\n\n        // Only set the age if it was previously saved\n        if (savedAge != -1) {\n            editTextAge.setText(String.valueOf(savedAge));\n        }\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        // Optionally save preferences when the activity stops\n        savePreferences(); // Automatically save when the activity is stopped\n    }\n}\n"
    },
    {
      "codeblockTitle": "activity_main.xml",
      "code": "\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/main\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:padding=\"16dp\"\n    tools:context=\".MainActivity\">\n\n    <EditText\n        android:id=\"@+id/editTextName\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:hint=\"Enter Name\"\n        android:inputType=\"text\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginBottom=\"8dp\"/>\n\n    <EditText\n        android:id=\"@+id/editTextEmail\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:hint=\"Enter Email\"\n        android:inputType=\"textEmailAddress\"\n        app:layout_constraintTop_toBottomOf=\"@id/editTextName\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginBottom=\"8dp\"/>\n\n    <EditText\n        android:id=\"@+id/editTextAge\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:hint=\"Enter Age\"\n        android:inputType=\"number\"\n        app:layout_constraintTop_toBottomOf=\"@id/editTextEmail\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginBottom=\"8dp\"/>\n\n    <Button\n        android:id=\"@+id/buttonSave\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Save Preferences\"\n        app:layout_constraintTop_toBottomOf=\"@id/editTextAge\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginTop=\"8dp\"/>\n\n</androidx.constraintlayout.widget.ConstraintLayout>"
    }
  ]
}
